<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Lua on sysğŸ”±fork</title>
    <link>http://sysfork.com/tags/lua/</link>
    <description>Recent content in Lua on sysğŸ”±fork</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <copyright>&amp;copy; 2017. All rights reserved.</copyright>
    <lastBuildDate>Fri, 21 Apr 2017 17:37:30 +0800</lastBuildDate>
    <atom:link href="http://sysfork.com/tags/lua/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>luaä¸Cäº¤äº’ä¸­çš„æ­»å¾ªç¯æ£€æµ‹</title>
      <link>http://sysfork.com/post/lua-c-detect-inifinite-loop/</link>
      <pubDate>Fri, 21 Apr 2017 17:37:30 +0800</pubDate>
      
      <guid>http://sysfork.com/post/lua-c-detect-inifinite-loop/</guid>
      <description>

&lt;p&gt;ç°åœ¨å¾ˆå¤šæ¸¸æˆå¼•æ“éƒ½æ˜¯&lt;code&gt;C++&lt;/code&gt; + &lt;code&gt;lua&lt;/code&gt;çš„ç»“æ„ï¼Œä¸€æ—¦æŸä¸ªæœåŠ¡å™¨å¼€å‘äººå‘˜å¤§æ„å†™å‡ºæ­»å¾ªç¯ä»£ç ï¼Œå¾ˆå®¹æ˜“å¯¼è‡´æœåŠ¡æ— å“åº”ï¼Œå½±å“æœåŠ¡å™¨ç¨³å®šã€‚æ‰€ä»¥å¼•æ“ä¸­æœ€å¥½èƒ½æä¾›ä¸€ä¸ªæ­»å¾ªç¯çš„æ£€æµ‹æœºåˆ¶ï¼Œä¸€æ—¦å‡ºç°æ­»å¾ªç¯åˆ™æ‰§è¡Œä¸€äº›è¡Œä¸ºæ‰“æ–­å½“å‰æµç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;æ­»å¾ªç¯çš„æ£€æµ‹æ˜¯ä¸€ä¸ª&lt;a href=&#34;https://en.wikipedia.org/wiki/Halting_problem&#34;&gt;åœæœºé—®é¢˜&lt;/a&gt;ã€‚æˆ‘ä»¬æ— æ³•åˆ¤æ–­åˆ°åº•æ˜¯ä»»åŠ¡æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œè¿˜æ˜¯è¿›å…¥äº†çœŸæ­£çš„æ­»å¾ªç¯ï¼Œå¥½åœ¨è¿™å¯¹æˆ‘ä»¬çš„æœåŠ¡æ¥è¯´åŒºåˆ«å¹¶ä¸é‡è¦ã€‚æ‰€ä»¥ä¸€ä¸ªç®€å•çš„åˆ¤æ–­æ¡ä»¶æ˜¯ï¼Œæ‰§è¡Œæ—¶é—´æ˜¯å¦è¶…è¿‡äº†é¢„å®šçš„é˜ˆå€¼ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;C++&lt;/code&gt;ä¸­é›†æˆ&lt;code&gt;lua&lt;/code&gt;ï¼Œè°ƒç”¨åˆ°æ¸¸æˆé€»è¾‘æ—¶ï¼Œä¸€èˆ¬é€šè¿‡&lt;a href=&#34;http://pgl.yoyo.org/luai/i/lua_pcall&#34;&gt;pcall&lt;/a&gt;ï¼Œä½†æ˜¯ä¸€æ—¦è°ƒç”¨äº†&lt;code&gt;pcall&lt;/code&gt;ï¼Œä»£ç çš„æ‰§è¡Œè·¯å¾„ä¾¿è¿›å…¥äº†&lt;code&gt;lua&lt;/code&gt;çš„ä¸–ç•Œï¼Œé™¤éé€šè¿‡ä¿¡å·æœºåˆ¶æ‰èƒ½åœ¨å½“å‰çº¿ç¨‹ä¸­ä¸­æ–­ï¼Œå®ç°æ‰§è¡Œå…¶ä»–åˆ†æ”¯çš„ç›®çš„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œ&lt;code&gt;lua&lt;/code&gt;è¿˜æä¾›äº†&lt;code&gt;debug.sethook&lt;/code&gt;å‡½æ•°ï¼Œå¯ä»¥åœ¨æ‰§è¡Œæ­£å¸¸é€»è¾‘ä¸­è§¦å‘&lt;code&gt;hook&lt;/code&gt;ï¼Œå®ç°ç›‘æµ‹è¶…æ—¶çš„åŠŸèƒ½ã€‚æ‰€ä»¥æˆ‘ä»¬æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ¡ˆï¼š&lt;/p&gt;

&lt;h1 id=&#34;1-ä½¿ç”¨-debug-sethook-æ¥å®ç°&#34;&gt;1. ä½¿ç”¨&lt;code&gt;debug.sethook()&lt;/code&gt;æ¥å®ç°&lt;/h1&gt;

&lt;blockquote&gt;
&lt;p&gt;debug.sethook ([thread,] hook, mask [, count])
Sets the given function as a hook. The string mask and the number count describe when the hook will be called. The string mask may have the following characters, with the given meaning:&lt;/p&gt;

&lt;p&gt;&amp;ldquo;c&amp;rdquo;: the hook is called every time Lua calls a function;
&amp;ldquo;r&amp;rdquo;: the hook is called every time Lua returns from a function;
&amp;ldquo;l&amp;rdquo;: the hook is called every time Lua enters a new line of code.
With a count different from zero, the hook is called after every count instructions.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬åªè¦åœ¨æ‰§è¡Œ&lt;code&gt;pcall&lt;/code&gt;ä¹‹å‰è®¾å®šç±»ä¼¼å¦‚ä¸‹çš„ä»£ç :&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-lua&#34;&gt;debug.sethook(function()error(&amp;quot;timeout&amp;quot;)end, &amp;quot;c&amp;quot;, 10000)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç†è®ºä¸Šåªè¦ä»£ç æŒ‡ä»¤æ•°è¶…è¿‡10000æ¡å°±èƒ½è§¦å‘&lt;code&gt;error&lt;/code&gt;ã€‚å¥½åƒæŒºå®Œç¾çš„ã€‚&lt;/p&gt;

&lt;p&gt;Butï¼Œåœ¨&lt;code&gt;luajit&lt;/code&gt;ä¸‹è¿™æ¡ä¸ä¸€å®šæˆç«‹ï¼Œå› ä¸ºæ‰§è¡Œçš„é€»è¾‘è¢«&lt;code&gt;jit&lt;/code&gt;ç¼–è¯‘äº†ï¼Œè€Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ&lt;code&gt;hook&lt;/code&gt;æ˜¯ä¸ä¼šè§¦å‘çš„
&amp;gt; If your program is running in a tight loop and never falls back to the interpreter, the debug hook never runs and can&amp;rsquo;t throw the &amp;ldquo;interrupted!&amp;rdquo; error.&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªæœªå…¬å¼€çš„ç¼–è¯‘é€‰é¡¹&lt;code&gt;LUAJIT_ENABLE_CHECKHOOK&lt;/code&gt;ï¼Œåœ¨&lt;code&gt;lj_record.c&lt;/code&gt;æ–‡ä»¶çš„æœ€åé¢ï¼Œä¸Šé¢å†™é“
&amp;gt; Regularly check for instruction/line hooks from compiled code and
&amp;gt; exit to the interpreter if the hooks are set.
&amp;gt;
&amp;gt; This is a compile-time option and disabled by default, since the
&amp;gt; hook checks may be quite expensive in tight loops.&lt;/p&gt;

&lt;p&gt;çœ‹ä¼¼å¯ä»¥ï¼Œä½†æ˜¯æ³¨æ„ï¼Œå¦‚æœ&lt;code&gt;hook&lt;/code&gt;è¢«è®¾ç½®äº†ï¼Œåˆ™æ‰§è¡Œçš„ä»£ä»·æ˜¯æ¯”è¾ƒæ˜‚è´µçš„ã€‚å¯¹äºæ¸¸æˆè€Œè¨€ï¼Œå¤§éƒ¨åˆ†çš„æ—¶é—´éƒ½åœ¨&lt;code&gt;lua&lt;/code&gt;å±‚ï¼Œè€Œä¸ºäº†ç›‘æµ‹æ­»å¾ªç¯ï¼Œå‡ ä¹
è¦åœ¨æ‰€æœ‰çš„luaæ‰§è¡Œè¿‡ç¨‹ä¸­è®¾ç½®&lt;code&gt;hook&lt;/code&gt;ï¼Œè¿™æ˜¯ä¸å¤ªå®¹æ˜“æ¥å—çš„ã€‚å¥½åœ¨ä¸‹é¢çš„æ³¨é‡Šæåˆ°äº†
&amp;gt; You can set the instruction hook via lua_sethook() with a count of 1
&amp;gt; from a signal handler or another native thread. Please have a look
&amp;gt; at the first few functions in luajit.c for an example (Ctrl-C handler).&lt;/p&gt;

&lt;p&gt;å—¯ï¼Œçœ‹æ ·å­åªèƒ½ä½¿ç”¨ç¬¬äºŒç§æ–¹æ¡ˆäº†ã€‚&lt;/p&gt;

&lt;h1 id=&#34;2-ä½¿ç”¨ä¿¡å·æ¥å®ç°&#34;&gt;2. ä½¿ç”¨ä¿¡å·æ¥å®ç°&lt;/h1&gt;

&lt;p&gt;åœ¨luaçš„å‘½ä»¤è¡Œç¨‹åºä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡&lt;code&gt;Ctrl-C&lt;/code&gt;ä¸­æ–­æ­£åœ¨æ‰§è¡Œçš„ç¨‹åº&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt;  for i=1,10000000 do sum = sum + i end
^Cinterrupted!
stack traceback:
        stdin:1: in main chunk
        [C]: in ?

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä»”ç»†çœ‹&lt;code&gt;lua.c&lt;/code&gt;æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹ä»£ç &lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-C&#34;&gt;static void lstop (lua_State *L, lua_Debug *ar) {
  (void)ar;  /* unused arg. */
  lua_sethook(L, NULL, 0, 0);
  luaL_error(L, &amp;quot;interrupted!&amp;quot;);
}


static void laction (int i) {
  signal(i, SIG_DFL); /* if another SIGINT happens before lstop,
                              terminate process (default action) */
  lua_sethook(globalL, lstop, LUA_MASKCALL | LUA_MASKRET | LUA_MASKCOUNT, 1);
}

// ....
//in docall
signal(SIGINT, laction);
status = lua_pcall(L, narg, (clear ? 0 : LUA_MULTRET), base);
signal(SIGINT, SIG_DFL);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å—¯ï¼Œåœ¨æ‰§è¡Œ&lt;code&gt;pcall&lt;/code&gt;ä¹‹å‰è®¾ç½®äº†ä¿¡å·å¤„ç†å‡½æ•°ï¼Œæ•æ‰&lt;code&gt;Ctrl-C&lt;/code&gt;çš„ä¿¡å·ï¼Œä¸€æ—¦å‘ç”Ÿï¼Œåˆ™ç«‹é©¬è°ƒç”¨&lt;code&gt;lua_sethook&lt;/code&gt;å‡½æ•°ï¼ŒæŒ‡å®šåœ¨æ‰§è¡Œä¸‹ä¸€è¡Œä»£ç æ—¶è°ƒç”¨&lt;code&gt;lstop&lt;/code&gt;ï¼Œè€Œåœ¨&lt;code&gt;lstop&lt;/code&gt;ä¸­å°±ç›´æ¥æŠ›å‡º&lt;code&gt;error&lt;/code&gt;äº†ã€‚æ‰€ä»¥é—®é¢˜æ˜¯ &lt;strong&gt;&lt;code&gt;lua_sethook&lt;/code&gt;æ˜¯å¯ä»¥åœ¨ä¿¡å·å¤„ç†å‡½æ•°ä¸­è°ƒç”¨çš„&lt;/strong&gt;ï¼Ÿ&lt;/p&gt;

&lt;p&gt;ç­”æ¡ˆï¼šæ˜¯&lt;/p&gt;

&lt;p&gt;ä»æºç ä¸­å¯ä»¥çœ‹åˆ°&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/* This function can be called asynchronously (e.g. during a signal). */
LUA_API int lua_sethook(lua_State *L, lua_Hook func, int mask, int count)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œä»&lt;code&gt;luajit&lt;/code&gt;çš„æºç æ³¨é‡Šæ¥çœ‹ï¼Œä¸ä»…ä»…åœ¨ä¿¡å·å¤„ç†å‡½æ•°ä¸­ï¼Œåœ¨å…¶ä»–çº¿ç¨‹ä¸­ä¹Ÿèƒ½è¢«è°ƒç”¨
&amp;gt; from a signal handler or another native thread.&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œè¿™ç§æ–¹æ¡ˆæ˜¯å¯è¡Œçš„ã€‚å› æ­¤ï¼Œå¯¹äºå•çº¿ç¨‹ç¨‹åºè€Œè¨€ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®&lt;code&gt;alarm&lt;/code&gt;æ¥å®ç°è¶…æ—¶è®¾ç½®&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;alarm(10);// trigger after 10s
signal(SIGALRM, laction);
status = lua_pcall(L, narg, (clear ? 0 : LUA_MULTRET), base);
alarm(0)
signal(SIGALRM, SIG_DFL);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è€Œå¯¹äºå¤šçº¿ç¨‹ç¨‹åºï¼Œå¯ä»¥ç›´æ¥å¯ä¸€ä¸ªå®šæ—¶å™¨æ¥æ¥&lt;code&gt;check&lt;/code&gt;ï¼Œè€Œä¸ç”¨ä½¿ç”¨å¾ˆæ¶å¿ƒçš„ä¿¡å·ã€‚&lt;/p&gt;

&lt;p&gt;å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä½¿ç”¨è¿™ç§æ–¹å¼è§¦å‘è¶…æ—¶&lt;code&gt;error&lt;/code&gt;å¯ä»¥å¾ˆè½»æ˜“åœ°åœ¨&lt;code&gt;pcall&lt;/code&gt;ä¸­æ•è·ï¼Œä»è€Œè€Œå·²å®ç°å †æ ˆçš„æ‰“å°ç­‰åŠŸèƒ½ï¼Œæ–¹ä¾¿æŸ¥æ‰¾å’Œå®šä½é—®é¢˜ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Lua Tableä¸­HashMapä»‹ç»</title>
      <link>http://sysfork.com/post/lua-hashtable-introduction/</link>
      <pubDate>Thu, 01 Sep 2016 17:40:08 +0800</pubDate>
      
      <guid>http://sysfork.com/post/lua-hashtable-introduction/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://www.lua.org/pil/2.5.html&#34;&gt;Table&lt;/a&gt; åœ¨Luaä¸­æœ‰ç€æå…¶é‡è¦çš„åº”ç”¨ï¼Œä»æ ¸å¿ƒè¯­è¨€å®ç°ï¼Œå¦‚&lt;a href=&#34;https://en.wikipedia.org/wiki/String_interning&#34;&gt;short string intern&lt;/a&gt;ï¼Œ
åˆ°åˆ©ç”¨&lt;a href=&#34;https://www.lua.org/pil/13.html&#34;&gt;metatable&lt;/a&gt;å®ç°çš„&lt;a href=&#34;lua-users.org/wiki/LuaClassesWithMetatable&#34;&gt;class&lt;/a&gt;ï¼Œtableå‡ ä¹æ— æ‰€ä¸èƒ½ã€‚å¦‚æ­¤é«˜é¢‘åº¦åœ°åˆ©ç”¨ä¹Ÿå°±æ„å‘³ç€luaå¿…é¡»è¦æœ‰ä¸€ä¸ªé«˜æ•ˆçš„
tableå®ç°ã€‚&lt;/p&gt;

&lt;p&gt;å¾ˆå¤šè¯­è¨€æä¾›äº†arrayå’Œassociative arrayä¸¤ç§æ•°æ®ç»“æ„ã€‚arrayæ˜¯æŒ‡ä»¥æŸä¸ªæŒ‡å®šçš„æœ€å°æ•´æ•°ä¸‹æ ‡(ä¸€èˆ¬æ˜¯0)å¼€å§‹çš„è¿ç»­å­˜å‚¨çš„æ•°æ®ç»“æ„ï¼Œå®ƒæœ‰vectorã€listã€arrayã€ArrayListç­‰å¤šç§åç§°ï¼›associative arrayï¼Œä¸­æ–‡
ä¹Ÿå«å…³è”æ•°ç»„ï¼Œå³å°†ä¸€å¯¹key/pairä¹‹é—´å…³è”èµ·æ¥ï¼Œå®ƒä¸€èˆ¬ä¹Ÿè¢«ç§°ä¸ºmapã€dictç­‰ã€‚Luaå¹¶ä¸æä¾›arrayï¼Œå› ä¸ºæ•°ç»„æœ¬èº«ä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„å…³è”æ•°ç»„ã€‚ä½†æ˜¯ä»å†…éƒ¨è¡¨ç¤ºä¸Šï¼Œarrayå’Œmapæœ‰ç€æå¤§çš„ä¸åŒï¼Œarrayåªéœ€è¦ä¸€å—è¿ç»­çš„
å†…å­˜å³å¯å®ç°ï¼Œè€Œmapåˆ™æœ‰å¤šç§å®ç°ã€‚Luaä¸ºäº†æ•ˆç‡ï¼Œå°†ä¸€éƒ¨åˆ†æ•´æ•°ä¸‹æ ‡çš„å…ƒç´ å­˜å‚¨åœ¨array partä¸­ï¼Œè€Œå°†å…¶ä»–å…ƒç´ å­˜å‚¨åœ¨hashmapä¸­ï¼Œå®ç°åœ¨å¤–éƒ¨æ¥å£ä¸å˜çš„æƒ…å†µä¸‹å®ç°äº†æ•ˆç‡çš„æœ€å¤§åŒ–ã€‚arrayéƒ¨åˆ†æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«éœ€è¦
ä¼˜åŒ–çš„ï¼Œå…¶å°±æ˜¯ä¸€æ•´å—è¿ç»­çš„å†…å­˜ï¼Œå­˜å‚¨å’Œè¯»å–çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)ï¼Œè€Œhashmapçš„å®ç°ç§°ä¸ºäº†lua tableè®¾è®¡çš„é‡ç‚¹ã€‚&lt;/p&gt;

&lt;p&gt;mapæœ‰å¤šç§å®ç°æ‰‹æ®µï¼Œåœ¨stlä¸­ï¼Œé»˜è®¤çš„mapä½¿ç”¨çš„æ˜¯çº¢é»‘æ ‘ï¼Œå­˜å‚¨å’Œè¯»å–çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(logn)ï¼›è™½ç„¶çº¢é»‘æ ‘çš„è¡¨ç°ååˆ†ç¨³å®šï¼Œä½†æ˜¯å®ç°æ¯”è¾ƒå¤æ‚è€Œä¸”æ— æ³•æ»¡è¶³æç«¯æ€§èƒ½è¦æ±‚ï¼Œ
C++11ä¸­æ·»åŠ æ–°çš„&lt;a href=&#34;http://en.cppreference.com/w/cpp/container/unordered_map&#34;&gt;unordered_map&lt;/a&gt;ï¼Œå…¶å®ç°å°±æ˜¯ä½¿ç”¨äº†ä¸€ä¸ªhashmapã€‚hashmapçš„åŸºæœ¬æµç¨‹æ˜¯ä½¿ç”¨ä¸€ä¸ªhashå‡½æ•°æ¥å°†
ä¸€ä¸ªkeyæ˜ å°„åˆ°ä¸€å—è¿ç»­å†…å­˜ä¸­ï¼Œå®ç°åœ¨ç†æƒ³æƒ…å†µä¸‹è®¿é—®å’Œåˆ é™¤æ¥è¿‘O(1)çš„æ—¶é—´å¤æ‚åº¦ã€‚&lt;/p&gt;

&lt;p&gt;ç”±äºä¸€èˆ¬keyçš„å–å€¼èŒƒå›´å¤§äºhashmap slotæ•°ç›®ï¼Œæ‰€ä»¥ä¸å¯é¿å…åœ°å‡ºç°å†²çªçš„çŠ¶å†µã€‚åœ¨æ•™ç§‘ä¹¦ä¸­ï¼Œè§£å†³è¿™ç§å†²çªä¸€èˆ¬æœ‰ä¸¤ç§æ–¹æ³•ï¼š&lt;a href=&#34;https://en.wikipedia.org/wiki/Hash_table#Separate_chaining&#34;&gt;é“¾è¡¨æ³•&lt;/a&gt;
å’Œ&lt;a href=&#34;https://en.wikipedia.org/wiki/Open_addressing&#34;&gt;å¼€æ”¾å¯»å€æ³•&lt;/a&gt;ã€‚é“¾è¡¨æ³•çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œå°†å†²çªçš„å…ƒç´ ä½¿ç”¨é“¾è¡¨é“¾æ¥èµ·æ¥å³å¯ï¼›è€Œå¼€æ”¾å¯»å€æ³•åˆ™éœ€è¦å¤šæ¬¡è®¡ç®—ï¼Œç›´è‡³æ‰¾åˆ°ä¸€ä¸ªæ²¡æœ‰å†²çªçš„slotä¸ºæ­¢ã€‚
è¿™ä¸¤è€…éƒ½æœ‰è‡ªå·±çš„ä¼˜ç¼ºç‚¹ï¼Œé“¾è¡¨æ³•ç”±äºä½¿ç”¨äº†é“¾è¡¨ï¼Œæ— æ³•å……åˆ†åˆ©ç”¨CPUç¼“å­˜ï¼Œå¹¶ä¸”å®ç°æ·±æ‹·è´éš¾åº¦è¾ƒå¤§ï¼›è€Œå¼€æ”¾å¯»å€æ³•æ— æ³•å®ç°åˆ é™¤å…ƒç´ çš„åŠŸèƒ½ï¼Œå¹¶ä¸”å½“å…ƒç´ å¯†åº¦æ¯”è¾ƒå¤§æ—¶ï¼Œæ•ˆç‡éå¸¸ä½ã€‚&lt;/p&gt;

&lt;p&gt;Lua tableä½¿ç”¨äº†ä¸€ä¸ªæŠ˜ä¸­çš„æ–¹æ¡ˆï¼Œå«åš&lt;a href=&#34;https://en.wikipedia.org/wiki/Coalesced_hashing&#34;&gt;Coalesced_hashing&lt;/a&gt;ï¼Œç»“åˆä½¿ç”¨äº†é“¾è¡¨æ³•å’Œå¼€æ”¾å¯»å€æ³•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://upload.wikimedia.org/wikipedia/commons/4/4c/CoalescedHash.jpg&#34; alt=&#34;Coalesced_hashing&#34; /&gt;&lt;/p&gt;

&lt;p&gt;å½“æ’å…¥ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå®šä¹‰å…¶åŸæœ¬åº”è¯¥åœ¨çš„ä½ç½®ä¸ºmainpositionï¼Œå¦‚æœmainpoisitionå¯¹åº”çš„slotæ˜¯ç©ºçš„ï¼Œåˆ™ç›´æ¥æ’å…¥ï¼›å¦‚æœéç©ºï¼Œçœ‹çœ‹åœ¨é‚£ä¸ªä½ç½®ä¸Šçš„å…ƒç´ çš„mainpositionæ˜¯ä¸æ˜¯å½“å‰çš„slotï¼Œå¦‚æœä¸æ˜¯çš„
è¯ï¼Œåˆ™å°†å…¶ç§»åŠ¨åˆ°ä»»æ„ä¸€ä¸ªç©ºçš„slot(ä½ç½®A)ï¼Œç„¶åå°†å½“å‰çš„å…ƒç´ æ’å…¥åˆ°mainpositionä½ç½®ï¼Œå¹¶å°†å½“å‰çš„nextå­—æ®µè®¾ç½®æˆä½ç½®Aï¼Œå½¢æˆé“¾è¡¨ã€‚å¦‚æœå ç”¨å…ƒç´ mainpositionå°±æ˜¯å½“å‰ä½ç½®ï¼Œåˆ™å°†å¾…æ’å…¥çš„
å…ƒç´ æ’å…¥åˆ°ä»»æ„ä¸€ä¸ªç©ºçš„ä½ç½®ä¸Šï¼Œå¹¶é“¾æ¥åˆ°å ç”¨å…ƒç´ çš„åé¢ã€‚&lt;/p&gt;

&lt;p&gt;é€šè¿‡ä¸Šé¢çš„è¿‡ç¨‹ï¼Œå®ç°äº†æ‰€æœ‰çš„å…ƒç´ éƒ½å°½é‡ä¿å­˜åœ¨mainpositionä¸Šï¼Œå½“æŸ¥æ‰¾çš„æ—¶å€™ä¹Ÿèƒ½ä½¿ç”¨æ›´å°‘çš„æ¬¡æ•°æ¥æ‰¾åˆ°å…ƒç´ ä½ç½®ã€‚è¿™å¯¹å…ƒç´ æœ¬æ¥å°±åœ¨hashmapä¸­ï¼Œæ•ˆç‡æ˜¯æ¯”è¾ƒé«˜çš„ã€‚ä½†æ˜¯ï¼Œå½“å…ƒç´ ä¸åœ¨hashmapä¸­ï¼ŒæŸ¥æ‰¾çš„ä»£ä»·
æ¯”è¾ƒé«˜ã€‚&lt;/p&gt;

&lt;p&gt;lua tableçš„ä»£ç å®ç°åœ¨&lt;a href=&#34;https://www.lua.org/source/5.3/ltable.c.html&#34;&gt;è¿™é‡Œ&lt;/a&gt;ï¼Œå®ç°éå¸¸ç®€æ´æ˜äº†ï¼Œä¹Ÿä¸æ˜¯å¾ˆéš¾æ‡‚ï¼Œä½†æ˜¯å¯¹äºå¹³æ—¶ç»å¸¸ä½¿ç”¨luaçš„åŒå­¦æ¥è¯´è¯»ä¸€è¯»è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>