<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Disqus on sysğŸ”±fork</title>
    <link>http://sysfork.com/tags/disqus/</link>
    <description>Recent content in Disqus on sysğŸ”±fork</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <copyright>&amp;copy; 2017. All rights reserved.</copyright>
    <lastBuildDate>Sun, 07 May 2017 18:11:51 +0800</lastBuildDate>
    <atom:link href="http://sysfork.com/tags/disqus/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>è®©disqusæ”¯æŒå¤§é™†è®¿é—®</title>
      <link>http://sysfork.com/post/use-disqus-in-china/</link>
      <pubDate>Sun, 07 May 2017 18:11:51 +0800</pubDate>
      
      <guid>http://sysfork.com/post/use-disqus-in-china/</guid>
      <description>

&lt;p&gt;ç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œ&lt;a href=&#34;https://disqus.com/&#34;&gt;disqus&lt;/a&gt; åœ¨å¤§é™†éš¾ä»¥è®¿é—®ï¼Œéšç€&lt;a href=&#34;https://duoshuo.com&#34;&gt;å¤šè¯´&lt;/a&gt;çš„å…³é—­ï¼Œæ— æ³•æ­£å¸¸åœ°ä½¿ç”¨è¯„è®ºåŠŸèƒ½å·²ç»æˆä¸º
ã€Œé™æ€åšå®¢ç”Ÿæˆå™¨ç±»åšå®¢ã€çš„ä¸€ä¸ªé—®é¢˜ã€‚ å¥½åœ¨ disqus æä¾›äº†ä¸€äº› &lt;a href=&#34;https://disqus.com/api/docs/&#34;&gt;api&lt;/a&gt; ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›æ–¹æ³•å®ç°è¯„è®ºçš„åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;h1 id=&#34;åç«¯&#34;&gt;åç«¯&lt;/h1&gt;

&lt;p&gt;ä¹‹å‰å·²ç»æœ‰éƒ¨åˆ†çš„è§£å†³æ–¹æ¡ˆï¼Œå…¶ä¸­æœ€å®Œå–„çš„æ˜¯ &lt;a href=&#34;https://shijianan.com/2017/01/02/build-your-own-disqus/&#34;&gt;è¿™é‡Œ&lt;/a&gt; ï¼Œå…¶ä¸­ä½¿ç”¨çš„æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ª
&lt;a href=&#34;https://disqus.com/api/applications/&#34;&gt;disqus application&lt;/a&gt; ï¼Œ
ç„¶åä½¿ç”¨å„ç§ api ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨ python æˆ–è€…ç›´æ¥ä½¿ç”¨ nginx çš„åå‘ä»£ç†ã€‚æˆ‘ä¹Ÿæ›´æ–°è¿™æ®µ &lt;a href=&#34;https://github.com/shijn/disqus-proxy&#34;&gt;python&lt;/a&gt; ä»£ç ï¼Œä½†æ˜¯åœ¨
åˆ›å»ºè¯„è®ºçš„æ—¶å€™æ€»æ˜¯å‡ºé”™ï¼Œ æç¤º &lt;code&gt;This application cannot create posts on the chosen forum (code 12)&lt;/code&gt; ã€‚åœ¨å°è¯•äº†å¤šç§
&lt;a href=&#34;http://stackoverflow.com/questions/15416688/disqus-api-create-comment-as-guest&#34;&gt;æ–¹æ³•&lt;/a&gt;ï¼ŒæŸ¥é˜…äº†ä¼—å¤šç½‘é¡µå‡æ²¡æœ‰è§£å†³ã€‚åæ¥æ‰¾åˆ°ä¸€ç§è¯´æ³•ï¼Œè¯´æ˜¯è¿™ä¸ªæ¥å£æ— æ³•ä½¿ç”¨
è‡ªå·±åˆ›å»ºçš„&lt;code&gt;api_key&lt;/code&gt;ï¼Œæœ€ç»ˆæ‰¾åˆ°äº†&lt;a href=&#34;http://spirytoos.blogspot.com/2013/12/not-so-easy-posting-as-guest-via-disqus.html&#34;&gt;è§£å†³æ–¹æ¡ˆ&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å…¶å®ç­”æ¡ˆå°±åœ¨ disqus çš„å‰ç«¯ js é‡Œé¢ã€‚ä½¿ç”¨ chrome network tools å¯ä»¥çœ‹åˆ°æœ‰ä¸€äº›è®¿é—®ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Request URL:https://disqus.com/api/3.0/embed/threadDetails.json?thread=5781899723
&amp;amp;api_key=E8Uh5l5fHZ6gD8U3KycjAIAk46f68Zw7C6eW8WSjZvCLXebZ7p0r1yrYDrLilk2F
Request Method:GET
Status Code:200 OK
Remote Address:127.0.0.1:1081
Referrer Policy:no-referrer-when-downgrade
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å…¶ä¸­ disqus å®˜æ–¹çš„ js ä¹Ÿæ˜¯ä½¿ç”¨äº†è¿™å¥— api ï¼Œå…¶ä¸­ api_key èµ«ç„¶åœ¨åˆ—ï¼Œå¹¶ä¸”åœ¨3å¹´åçš„ä»Šå¤©è¿™ä¸ª key ä¾ç„¶æœ‰æ•ˆï¼Œå¹¶ä¸”è¿™ä¸ª key cd æ˜¯æ— é™çš„ï¼Œä¸åƒ &lt;a href=&#34;https://data.disqus.com/capabilities/&#34;&gt;disqus application &lt;/a&gt;
æœ‰ç€ 1000 æ¬¡/hour çš„å…¨å±€é™åˆ¶ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨è¿™ä¸ª api_key è¦æ±‚å¿…é¡»æä¾› Referer å’Œ Originï¼Œå¹¶ä¸”éƒ½è¦æ˜¯å®˜æ–¹çš„åœ°å€ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Referer https://disqus.com;
Origin https://disqus.com;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ‰€ä»¥æœ¬ç«™é‡‡ç”¨çš„ä¸€ä¸ªåå‘ä»£ç†çš„é…ç½®ä¸º&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;location ~ ^/disqus/(.*) {
    proxy_pass https://disqus.com/api/3.0/$1?api_key=E8Uh5l5fHZ6gD8U3KycjAIAk46f68Zw7C6eW8WSjZvCLXebZ7p0r1yrYDrLilk2F&amp;amp;$args;
    proxy_set_header Referer https://disqus.com;
    proxy_set_header Origin https://disqus.com;
    proxy_redirect off;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¥ä¸‹æ¥å°±å¯ä»¥ç›´æ¥ä½¿ç”¨æ­£å¸¸çš„æ¥å£äº†ã€‚å¤§éƒ¨åˆ†çš„æ¥å£éƒ½æ˜¯æ”¯æŒ jsonp çš„ï¼Œæ‰€ä»¥å¯ä»¥è·¨åŸŸè°ƒç”¨ï¼Œå¯¹äº POST è¯·æ±‚å¦‚å‘è¡¨è¯„è®ºç­‰æ— æ³•ä½¿ç”¨ jsonp çš„æƒ…å†µï¼Œåªèƒ½æ”¾åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨ä¸‹é¢äº†ã€‚æœŸå¾…æœ‰äººèƒ½åšä¸€ä¸ªæ”¯æŒè·¨åŸŸçš„å…¬å…±æ¥å£ :)ã€‚&lt;/p&gt;

&lt;h1 id=&#34;å‰ç«¯&#34;&gt;å‰ç«¯&lt;/h1&gt;

&lt;p&gt;å‰ç«¯çš„éƒ¨åˆ†æœ‰ç‚¹éº»çƒ¦ï¼Œä½†æ˜¯è‡³å°‘æ˜¯æœ‰è§£å†³æ–¹æ¡ˆçš„ï¼Œå¯ä»¥ä½¿ç”¨å„ç§æ’ä»¶å¦‚&lt;a href=&#34;https://github.com/Viima/jquery-comments&#34;&gt;jquery comments&lt;/a&gt;ç­‰ï¼Œæœ¬ç«™ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªè‡ªå·±éšä¾¿å†™çš„å®ç°ï¼Œæ‰€ä»¥ç•Œé¢æ¯”è¾ƒæŒ«ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹çœ‹
æœ¬ç«™çš„&lt;a href=&#34;https://github.com/usbuild/site&#34;&gt;ä»£ç å®ç°&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºä¸€äº›æœ‰ã€Œæ¢¯å­ã€çš„ç”¨æˆ·ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¸Œæœ›èƒ½å¤Ÿè¿™äº›ç”¨æˆ·èƒ½å¤Ÿæ­£å¸¸è®¿é—®ï¼Œæ‰€ä»¥ä½¿ç”¨äº†ä¸€ä¸ªç­–ç•¥ï¼šå½“èƒ½å¤Ÿæ­£å¸¸åŠ è½½ disqus å®˜æ–¹ js æ—¶å°±ä½¿ç”¨å®˜æ–¹ç‰ˆæœ¬ï¼Œå¦åˆ™å°±ä½¿ç”¨ç®€æ˜“ç‰ˆæœ¬ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-js&#34;&gt;function RenderComment(forum, apiPath, selector, url) {
  var done = false;
  var dsq = document.createElement(&#39;script&#39;);
  dsq.src = &#39;//&#39;+forum+&#39;.disqus.com/embed.js&#39;;
  dsq.onload = function()  {
    done = true;
  };
  document.head.appendChild(dsq);
  setTimeout(function () { if (!done)
    api = new CommentAPI(forum, apiPath, selector, url);
  }, 2000);
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœ¬ç«™çš„ä»£ç å®ç°ç›¸å½“ç®€é™‹ï¼Œä»…ä»…æä¾›ä¸€ä¸ªæ€è·¯ï¼Œå¸Œæœ›èƒ½æœ‰æ‰€å¸®åŠ©ã€‚&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>