<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.42.1" />

  <title>lua 5.1 åˆ†æ”¯è¯­å¥ bytecode çš„ç”Ÿæˆï¼ˆä¸€ï¼‰ &middot; sysğŸ”±fork</title>

  
  
  <link rel="stylesheet" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="http://sysfork.com/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="http://sysfork.com/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="http://sysfork.com/css/blackburn.css">

  
  <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css">

  
  

  
  

  
  <link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.4.0/styles/gruvbox-light.min.css">
  <script src="//cdn.bootcss.com/highlight.js/9.4.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="http://sysfork.com/img/favicon.ico" type="image/x-icon" />

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  

  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="http://sysfork.com/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="http://sysfork.com/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/usbuild" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/usbuild" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2018. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>lua 5.1 åˆ†æ”¯è¯­å¥ bytecode çš„ç”Ÿæˆï¼ˆä¸€ï¼‰</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>20 May 2017, 15:57</time>
  </div>

  

  
  
  
  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="http://sysfork.com/tags/lua">lua</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="http://sysfork.com/tags/bytecode">bytecode</a>
    
  </div>
  
  

</div>

  

<p>æœ¬æ–‡åªå¯¹ <code>IF cond THEN block {ELSEIF cond THEN block} [ELSE block] END</code> è¯­æ³•çš„å­—èŠ‚ç ç”Ÿæˆè¿‡ç¨‹è¿›è¡Œæè¿°ã€‚</p>

<h2 id="ç”Ÿæˆçš„ç»“æœ">ç”Ÿæˆçš„ç»“æœ</h2>

<p>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸‹é¢çš„ç¤ºä¾‹ï¼Œä»…ä¸ºæ¼”ç¤ºï¼š</p>

<pre><code>local cond1 = true
local cond2 = true
if cond1 then
    cond1 = false
elseif cond2 then
    cond2 = false
else
    cond1 = false
end
</code></pre>

<p>ä½¿ç”¨<code>luac -l -l</code>é€‰é¡¹åˆ—å‡ºæ¥çš„ç»“æœä¸º</p>

<pre><code>main &lt;test.lua:0,0&gt; (12 instructions, 48 bytes at 0x184e530)
0+ params, 2 slots, 0 upvalues, 2 locals, 0 constants, 0 functions
        1       [1]     LOADBOOL        0 1 0
        2       [2]     LOADBOOL        1 1 0
        3       [3]     TEST            0 0 0
        4       [3]     JMP             2       ; to 7
        5       [4]     LOADBOOL        0 0 0
        6       [4]     JMP             5       ; to 12
        7       [5]     TEST            1 0 0
        8       [5]     JMP             2       ; to 11
        9       [6]     LOADBOOL        1 0 0
        10      [6]     JMP             1       ; to 12
        11      [8]     LOADBOOL        0 0 0
        12      [9]     RETURN          0 1
constants (0) for 0x184e530:
locals (2) for 0x184e530:
        0       cond1   2       12
        1       cond2   3       12
upvalues (0) for 0x184e530:
</code></pre>

<p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ€ç»ˆçš„ç”Ÿæˆç»“æœã€‚æˆ‘ä»¬å…³æ³¨çš„æ˜¯å…¶ä¸­çš„<code>TEST</code>å’Œ<code>JUMP</code>ã€‚åœ¨ç¬¬3è¡Œçš„<code>TEST</code>ï¼Œå…¶æ„æ€æ˜¯å¦‚æœ0å·å¯„å­˜å™¨ä¸­çš„å†…å®¹(cond1)
ä¸ºfalse(0)çš„è¯ï¼Œé‚£ä¹ˆå°±æ‰§è¡Œä¸‹é¢çš„<code>JMP</code>è¯­å¥ï¼Œå¦åˆ™å°±è°ƒè¿‡<code>JMP</code>ç›´æ¥åˆ°ç¬¬5è¡Œã€‚<code>LUA</code>ä¸­çš„åˆ†æ”¯å®ç°éƒ½æ˜¯ä½¿ç”¨<code>TEST</code>ç­‰åé¢ç´§è·Ÿ<code>JMP</code>å®ç°çš„ï¼Œ
ä»ä¸» dispatch ä»£ç ä¸­å¯ä»¥çœ‹åˆ°</p>

<pre><code>    // ...
      case OP_TEST: {
        if (l_isfalse(ra) != GETARG_C(i))
          dojump(L, pc, GETARG_sBx(*pc));
        pc++;
        continue;
      }
      case OP_TESTSET: {
        TValue *rb = RB(i);
        if (l_isfalse(rb) != GETARG_C(i)) {
          setobjs2s(L, ra, rb);
          dojump(L, pc, GETARG_sBx(*pc));
        }
        pc++;
        continue;
      }
      // ...
</code></pre>

<p><code>JMP</code>è·³è½¬ï¼Œæ°¸è¿œéƒ½æ˜¯åˆ†æ”¯ä¸æˆç«‹çš„æƒ…å†µï¼Œè€Œ<code>TEST</code>æˆåŠŸåçš„è·³è½¬æ°¸è¿œæ˜¯è·³è¿‡ä¸‹ä¸€è¡Œï¼Œå¤±è´¥çš„è¯ç»§ç»­æ‰§è¡Œæ¥ä¸‹æ¥çš„JMPã€‚<code>if</code>è¯­å¥çš„å­—èŠ‚ç è§£æå°±åˆ°è¿™é‡Œï¼Œåé¢çš„<code>elseif</code>ç­‰éƒ½æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå†äº†è§£è¿™ä¸ªäº‹å®ä¹‹åã€‚
é‚£ä¹ˆè¿™ç§å­—èŠ‚ç æ˜¯æ€ä¹ˆç”Ÿæˆçš„å‘¢ï¼Ÿä¸‹é¢æ¥åˆ†æä¸‹ã€‚</p>

<h2 id="ç”Ÿæˆçš„è¿‡ç¨‹">ç”Ÿæˆçš„è¿‡ç¨‹</h2>

<p><code>if</code>è¯­å¥çš„ä»£ç åœ¨<code>lparser.c</code>é‡Œé¢ï¼Œæœ€ä¸Šå±‚å¦‚ä¸‹ï¼š</p>

<pre><code>static void ifstat (LexState *ls, int line) {
  /* ifstat -&gt; IF cond THEN block {ELSEIF cond THEN block} [ELSE block] END */
  FuncState *fs = ls-&gt;fs;
  int flist;
  int escapelist = NO_JUMP;
  flist = test_then_block(ls);  /* IF cond THEN block */
  while (ls-&gt;t.token == TK_ELSEIF) {
    luaK_concat(fs, &amp;escapelist, luaK_jump(fs)); // å°† escapelist ä¸²èµ·æ¥ï¼Œè¿™é‡Œçš„ luaK_jump ä¼šè·³è½¬åˆ° end
    luaK_patchtohere(fs, flist); // æŠŠä¸Šé¢é‚£ä¸ª`JMP(1/3)` åœ°å€ä¿®æ”¹å¯¹
    flist = test_then_block(ls);  /* ELSEIF cond THEN block */
  }
  if (ls-&gt;t.token == TK_ELSE) {
    luaK_concat(fs, &amp;escapelist, luaK_jump(fs));
    luaK_patchtohere(fs, flist);
    luaX_next(ls);  /* skip ELSE (after patch, for correct line info) */
    block(ls);  /* `else' part */
  }
  else
    luaK_concat(fs, &amp;escapelist, flist); // è¿™é‡ŒæŠŠ flist ä¸²èµ·æ¥äº†ï¼Œæ„æ€æ˜¯æ²¡æœ‰ else è¯­å¥ï¼Œæ­¤æ—¶ flist æŒ‡å‘å°±æ˜¯ end
  luaK_patchtohere(fs, escapelist); // ä¿®æ”¹ escapelist åˆ° end è¯­å¥çš„ç»“å°¾
  check_match(ls, TK_END, TK_IF, line);
}
</code></pre>

<p>åœ¨è¯»å– token çš„æ—¶å€™ï¼Œé‡åˆ° <code>if ... then</code> ä¼šç”Ÿæˆ</p>

<pre><code>TEST reg 0 predict
JMP ??? (1)
</code></pre>

<p>ç”±äºæˆ‘ä»¬ä¸çŸ¥é“åé¢ä»£ç çš„å†…å®¹ï¼Œæ‰€ä»¥æ— æ³•ç¡®å®š<code>???</code>è¯¥å¡«å†™å¤šå°‘ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯è¦è®°ä½è¿™ä¸ªä½ç½®ï¼Œå°†æ¥æˆ‘ä»¬è¦æŠŠå€¼å¡«å†™è¿›å»ï¼Œè¿™ä¸ªå€¼å…¶å®å°±å­˜
åœ¨<code>flist</code>ã€‚ç„¶åæˆ‘ä»¬è¯»åˆ°<code>elseif cond then</code>è¯­å¥ï¼Œè¿™å°±æ„å‘³ç€ç¬¬ä¸€æ®µä»£ç çš„ç»“æŸæ­¤æ—¶åº”è¯¥è¦è·³è½¬å‡ºè¿™ä¸ª<code>if</code>
è¯­å¥ï¼Œæ‰€ä»¥æ­¤æ—¶åº”è¯¥æ’å…¥ä¸€ä¸ª<code>JMP(2)</code>åˆ°æ•´ä¸ªè¯­å¥çš„ç»“æŸï¼Œå› ä¸ºæœ‰å¤šä¸ª block çš„å­˜åœ¨ï¼Œåé¢å¯èƒ½ä¼šæœ‰å¾ˆå¤šè¿™ç§ç±»ä¼¼çš„
<code>JMP</code>ï¼Œå¦‚ä¸Šé¢ç¤ºä¾‹ä¸­çš„å„ç§<code>to 12</code>ï¼Œè¿™äº›ä½ç½®éƒ½æ— æ³•ç¡®å®šï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªescapelistæ¥æŒ‡å‘è¿™ä¸ªåœ°å€ï¼Œæ–¹ä¾¿åé¢å¤„ç†ã€‚
ç°åœ¨å›å¤´çœ‹<code>JMP(1)</code>ä½ç½®å°±ç¡®å®šäº†ï¼Œæ‰€ä»¥å½“å‰çš„PCå°±æ˜¯<code>flist</code>çš„æŒ‡å‘ç”±äº<code>elseif</code>åˆæ˜¯ä¸€ä¸ªåˆ†æ”¯è¯­å¥ï¼Œæ‰€ä»¥åˆå¯ä»¥ç”Ÿæˆä¸€æ®µ <code>TEST &amp; JMP(3)</code>ä»£ç äº†ã€‚åŒæ ·<code>JMP(2)</code>çš„ä½ç½®æ˜¯æ— æ³•ç¡®å®šçš„ã€‚
ç°åœ¨æ¥è°ˆè°ˆ<code>escapelist</code>ï¼Œå®šä¹‰</p>

<pre><code>int escapelist = NO_JUMP;
</code></pre>

<p>è¿™æ˜¯ä¸ª int å•Šï¼Œå¯¹äºå¤šä¸ªä½ç½®çš„<code>JMP(2)</code>è¦æ€ä¹ˆå¤„ç†ï¼Ÿlua é‡‡ç”¨äº†ä¸€ç§å·§å¦™çš„æœºåˆ¶ï¼Œç”±äºæ­¤æ—¶çš„<code>JMP</code>æ˜¯æ— æ•ˆçš„ï¼Œè¿˜æ²¡æœ‰è§£æåˆ°æ­£å¼åœ°å€çš„ï¼Œ
æ‰€ä»¥å…¶ä¸­çš„ç›®æ ‡åœ°å€åŸŸæ˜¯æ²¡æœ‰ä½¿ç”¨çš„ã€‚å› æ­¤ï¼Œå¯ä»¥é‡‡ç”¨ä¸²èµ·æ¥çš„æ–¹å¼ï¼ŒescapcelistæŒ‡å‘ç¬¬ä¸€ä¸ªæ²¡æœ‰è§£æçš„<code>JMP</code>ï¼Œç„¶åè¿™ä¸ª<code>JMP</code>çš„æŒ‡å‘åœ°å€
æ˜¯ä¸‹ä¸€ä¸ªæ²¡æœ‰è§£æçš„<code>JMP</code>ï¼Œè¿™æ ·ä¸€æ¥å°±å½¢æˆäº†é“¾è¡¨çš„ç»“æ„ã€‚åé¢å¯ä»¥ä¸€èµ·ä¿®æ”¹ç›®æ ‡åœ°å€é€šè¿‡<code>luaK_patchtohere</code>æ¥å®ç°ã€‚</p>

<h2 id="äº‹æƒ…æ²¡é‚£ä¹ˆç®€å•">äº‹æƒ…æ²¡é‚£ä¹ˆç®€å•</h2>

<p>æˆ‘ä»¬æˆ‘ä»¬è¯¦ç»†æŸ¥çœ‹çš„è¯ï¼Œ<code>test_then_block</code> -&gt; <code>cond</code> -&gt; <code>luaK_goiftrue</code>ï¼Œçœ‹çœ‹<code>luaK_goiftrue</code>å‡½æ•°çš„å®ç°ï¼š</p>

<pre><code>void luaK_goiftrue (FuncState *fs, expdesc *e) {
  int pc;  /* pc of last jump */
  luaK_dischargevars(fs, e);
  switch (e-&gt;k) {
    case VK: case VKNUM: case VTRUE: {
      pc = NO_JUMP;  /* always true; do nothing */
      break;
    }
    case VFALSE: {
      pc = luaK_jump(fs);  /* always jump */
      break;
    }
    case VJMP: {
      invertjump(fs, e);
      pc = e-&gt;u.s.info;
      break;
    }
    default: {
      pc = jumponcond(fs, e, 0);
      break;
    }
  }
  luaK_concat(fs, &amp;e-&gt;f, pc);  /* insert last jump in `f' list */
  luaK_patchtohere(fs, e-&gt;t);
  e-&gt;t = NO_JUMP;
}
</code></pre>

<p>å‰é¢çš„å‡ ç§ï¼Œå¦‚VKã€VKNUMã€VTRUEéƒ½æ˜¯å§‹ç»ˆæˆç«‹çš„ï¼Œæ‰€ä»¥å…¶<code>e-&gt;f</code>æ˜¯ä¸å­˜åœ¨çš„ï¼Œå› æ­¤ä¸º<code>NO_JUMP</code>ï¼Œè€Œå¯¹äº VFALSEï¼Œå…¶å§‹ç»ˆåº”è¯¥èµ°é”™è¯¯åˆ†æ”¯ï¼Œå› æ­¤å…¶<code>e-&gt;f</code>ä¸ºä¸€æ¡JMPã€‚<code>VJUMP</code>æ˜¯æ¯”è¾ƒè¯­å¥ç”Ÿæˆçš„, æ‰€ä»¥å…¶å€¼å°±æ˜¯ä»£è¡¨äº†<code>e-&gt;t</code>å’Œ<code>e-&gt;f</code>ï¼Œå› æ­¤å…¶<code>e-&gt;f</code>
å°±æ˜¯<code>invertjump</code>äº†ã€‚åœ¨å„ç§é”™è¯¯JMPéƒ½ç”Ÿæˆå®Œä¹‹åï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ­£ç¡®åˆ†æ”¯äº†ï¼Œæ‰€ä»¥ç›´æ¥å°±<code>luaK_patchtohere</code>äº†ï¼Œå½“å‰çš„å°±æ˜¯æ­£ç¡®çš„é€»è¾‘ã€‚</p>

<p>æˆ‘ä»¬å…³æ³¨çš„é‡ç‚¹å…¶å®æ˜¯ <code>jumponcond</code>:</p>

<pre><code>static int jumponcond (FuncState *fs, expdesc *e, int cond) {
  if (e-&gt;k == VRELOCABLE) {
    Instruction ie = getcode(fs, e);
    if (GET_OPCODE(ie) == OP_NOT) {
      fs-&gt;pc--;  /* remove previous OP_NOT */
      return condjump(fs, OP_TEST, GETARG_B(ie), 0, !cond);
    }
    /* else go through */
  }
  discharge2anyreg(fs, e);
  freeexp(fs, e);
  return condjump(fs, OP_TESTSET, NO_REG, e-&gt;u.s.info, cond);
}
</code></pre>

<p>å¯¹äº <code>if not xxxx then</code>ä¹‹ç±»çš„è¯­å¥ï¼Œæ˜¾ç„¶å…¶åˆ¤æ–­ç»“æœå€¼ä¸ä¼šè¢«å¼•ç”¨ï¼ˆåªæ˜¯è¢«åˆ¤æ–­è¯­å¥ä½¿ç”¨è€Œå·²ï¼‰æ‰€ä»¥è¿™é‡Œä½¿ç”¨<code>OP_TEST</code>ï¼Œå…¶ä»–æ‰€æœ‰æƒ…å†µ
éƒ½æ˜¯ä½¿ç”¨çš„<code>OP_TESTSET</code>ã€‚æˆ‘ä»¬å¯ä»¥çœ‹çœ‹<code>TESTSET</code>çš„å®šä¹‰ï¼š</p>

<blockquote>
<p><code>TESTSET A B C if (R(B) &lt;=&gt; C) then R(A) := R(B) else PC++</code></p>

<p>Used to implement and and or logical operators, or for testing a single
register in a conditional statement.</p>

<p>For TESTSET, register R(B) is coerced into a boolean and compared to
the boolean field C. If R(B) matches C, the next instruction is skipped,
otherwise R(B) is assigned to R(A) and the VM continues with the next
instruction. The and operator uses a C of 0 (false) while or uses a C value
of 1 (true).</p>
</blockquote>

<p>å¦‚æœ Bè½¬æ¢ä¸º booleanå å’Œ Cç›¸ç­‰ï¼Œåˆ™è·³è¿‡ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼›å¦åˆ™å°†Bèµ‹ç»™Aç„¶åç»§ç»­æ‰§è¡Œã€‚è¿™æ¡æŒ‡ä»¤çš„ç›®çš„æ˜¯ä¸ºçŸ­è·¯æ±‚å€¼æœåŠ¡çš„ã€‚é‚£ä¹ˆ<code>TESTSET</code>æ€
ä¹ˆåˆ°åé¢å˜æˆäº†<code>TEST</code>å‘¢ï¼Ÿå…¶è¿‡ç¨‹å°±åœ¨<code>dischargejpc</code>-&gt;<code>patchlistaux</code>-&gt;<code>patchtestreg</code>ã€‚</p>

<p>ä¸Šé¢æˆ‘ä»¬è¯´åˆ°<code>luaK_patchtohere</code>å°†å¾…å®š<code>JMP</code>æ”¹æˆå½“å‰pcçš„åŠŸèƒ½ï¼Œå…¶å®å¹¶ä¸æ˜¯ç›´æ¥ä¿®æ”¹çš„ï¼Œè€Œæ˜¯é€šè¿‡æ¯æ¬¡ç”Ÿæˆæ–°çš„å­—èŠ‚ç çš„æ—¶å€™ï¼Œè°ƒç”¨<code>dischargejpc</code>å®ç°çš„ï¼Œpatch çš„æ—¶å€™åªæ˜¯å°†è¿™ä¸ªä½ç½®ä¸²èµ·æ¥ï¼Œç„¶å <code>dischargejpc</code>ä¼šä¾¿åˆ©è¿™ä¸ªé“¾è¡¨è¿›è¡Œä¿®æ”¹</p>

<pre><code>patchlistaux(fs, fs-&gt;jpc, fs-&gt;pc, NO_REG, fs-&gt;pc);
</code></pre>

<p>é™¤æ­¤ä¹‹å¤–ï¼Œ<code>patchlistaux</code>è¿˜è¿›è¡Œçš„ä¸€é¡¹æ“ä½œå°±æ˜¯<code>patchtestreg</code>ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å¤„ç†<code>TESTSET</code>ï¼Œ</p>

<pre><code>131	static int patchtestreg (FuncState *fs, int node, int reg) {
132	  Instruction *i = getjumpcontrol(fs, node);
133	  if (GET_OPCODE(*i) != OP_TESTSET)
134	    return 0;  /* cannot patch other instructions */
135	  if (reg != NO_REG &amp;&amp; reg != GETARG_B(*i)) // å‰è€…è¡¨ç¤ºä¸éœ€è¦å¯„å­˜ï¼Œåè€…ä¸¤è€…ç›¸åŒçš„è¯ä¹Ÿæ˜¯ä¸éœ€è¦ä¿®æ”¹çš„
136	    SETARG_A(*i, reg);
137	  else  /* no register to put value or register already has the value */
138	    *i = CREATE_ABC(OP_TEST, GETARG_B(*i), 0, GETARG_C(*i)); // å¯¹äºä¸éœ€è¦è¿”å›å€¼çš„æƒ…å†µï¼Œç›´æ¥ä¿®æ”¹ä¸º TEST
139	
140	  return 1;
141	}
</code></pre>

<p>ä¸Šé¢çš„ä»‹ç»åªæ˜¯ æ¡ä»¶è¯­å¥çš„ä¸€éƒ¨åˆ†ï¼Œåé¢çš„æ–‡ç« ä¼šå¯¹çŸ­è·¯æ±‚å€¼ï¼Œcompare è¿ç®—ç¬¦ç­‰åšè§£é‡Šã€‚</p>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="http://sysfork.com/post/2017/lua-gc-paramter-internal/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="http://sysfork.com/post/2017/lua-gc-paramter-internal/">è§£ælua gc ä¸­çš„å‚æ•°æ§åˆ¶</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="http://sysfork.com/post/2017/lua-cond-statment-bytecode-generate-2/">lua 5.1 åˆ†æ”¯è¯­å¥ bytecode çš„ç”Ÿæˆï¼ˆäºŒï¼‰</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="http://sysfork.com/post/2017/lua-cond-statment-bytecode-generate-2/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  
<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'sysfork';
    dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

  
  
</div>

</div>
</div>
<script src="http://sysfork.com/js/ui.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19710645-12', 'auto');
  ga('send', 'pageview');

</script>


</script>
</body>
</html>

